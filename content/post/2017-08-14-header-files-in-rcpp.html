---
title: Header files in Rcpp
author: Brian J. Knaus
date: '2017-08-14'
slug: ''
categories: [R]
tags: [R, Rcpp, Header files]
description: 'Header files in Rcpp'
draft: yes
---



<p>In C++ you can create functions in order to help organize your code. This is helpful as your project grows or if you have a task that is performed by a function that several other functions may call. However, the functions you create are only visible to the other funcitons that are contained in a single source file. As your project grows, you may want to distribute your functions among several files. And if you do create that funcitons that is called by several other functions you may want to put it in its own file. But how do you get functions in different files to communicate with one another? The answer is to create header files. This post demonstrates how to create and use header files within the Rcpp framework.</p>
<div id="a-minimal-package" class="section level2">
<h2>A minimal package</h2>
<p>The use of header files is best illustrated by adding them to an R package. In order to illustrarte their use, we’ll need to create a minimal package to work with. I suggest using the R package <strong>pkgKitten</strong> which can be installed from CRAN if you do not already have it.</p>
<pre><code>R&gt; library(pkgKitten)
R&gt; kitten(name = &quot;myRpackage&quot;)</code></pre>
<p>You’ll also want <strong>devtools</strong> to easily add <strong>Rcpp</strong> to your package.</p>
<pre><code>bash$ cd myRpackage
bash$ R
R&gt; library(devtools)
R&gt; use_rcpp()</code></pre>
<p>And you’ll want to follow the directions at the prompt. You’ll also want to create a C++ source file in the <em>src/</em> directory. I use the RStudio C++ template called ‘timesTwo’. This should result in an R package ready to use Rcpp and ready for us to add a header file and C++ source to.</p>
<p><strong>File</strong>: R/hello.R</p>
<pre><code>## a placeholder
hello &lt;- function(txt = &quot;world&quot;) {
    cat(&quot;Hello, &quot;, txt, &quot;\n&quot;)
}

#&#39; @useDynLib myRpackage
#&#39; @importFrom Rcpp sourceCpp
NULL</code></pre>
<p><strong>File</strong>: src/timesTwo.cpp</p>
<pre><code>#include &lt;Rcpp.h&gt;
using namespace Rcpp;


// [[Rcpp::export]]
int timesTwo(int x) {
   return x * 2;
}</code></pre>
<pre><code>bash$ R CMD build myRpackage
bash$ R CMD check --as-cran myRpackage_1.0.tar.gz</code></pre>
</div>
<div id="files" class="section level2">
<h2>Files</h2>
<p>In order to illustrate the use of header files in Rcpp, we’ll create three separate files.</p>
<p><strong>File</strong>: modString.h</p>
<pre><code>#ifndef MODSTRING_H
#define MODSTRING_H

// This is the content of the .h file, which is where the declarations go
//int add(int x, int y); // function prototype for add.h -- don&#39;t forget the semicolon!
std::string modString(std::string myString);

// This is the end of the header guard
#endif</code></pre>
<p><strong>File</strong>: modString.cpp</p>
<pre><code>#include &lt;string&gt;
#include &lt;sstream&gt;

std::string modString(std::string myString)
{
  std::stringstream mySStream;
  mySStream &lt;&lt; myString &lt;&lt; &quot;, from header&quot;;
  myString = mySStream.str();
  return myString;
}</code></pre>
<p><strong>File</strong>: myFunction.cpp</p>
<pre><code>#include &lt;Rcpp.h&gt;
#include &quot;modString.h&quot;
using namespace Rcpp;

//&#39; @title modify_string
//&#39; @description
//&#39; Modify a string in Rcpp.
//&#39; @name modify_string
//&#39; @param x a vector of strings
//&#39; 
//&#39; @export
// [[Rcpp::export]]
StringVector modify_string(StringVector x) {
  std::string myString;
  myString = x[0];
  myString = modString(myString);
  x[0] = myString;
  return x;
}</code></pre>
</div>
<div id="usage" class="section level2">
<h2>Usage</h2>
</div>
<div id="links" class="section level2">
<h2>Links</h2>
<p>These are sources for information I used to create this post.</p>
<p><a href="http://www.cplusplus.com/forum/articles/10627/">Headers and Includes</a> at cplusplus.com.<br />
<a href="http://www.learncpp.com/cpp-tutorial/19-header-files/">Header files</a> at LearnCpp.com.<br />
<a href="https://CRAN.R-project.org/package=pkgKitten">pkgKitten</a> at CRAN, and at <a href="http://dirk.eddelbuettel.com/code/pkgkitten.html">dirk.eddelbuettel.com</a> (because it has a cute picture).</p>
<p>In order to find examples of header files used in R packages you can search GitHub using the following query.</p>
<pre><code>user:cran extension:.h</code></pre>
<p>Make sure you search for ‘Code’ instead of the default search of ‘Repositories’ so that you return code examples.</p>
</div>
